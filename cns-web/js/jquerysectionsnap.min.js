(function(a){a.fn.sectionsnap=function(g){var i=a.extend({delay:100,selector:".section",reference:0.9,animationTime:400,offsetTop:0,offsetBottom:0},g);var b=this,e="down",d=a(window).scrollTop(),h,c=false;var k=function(){if(a(window).scrollTop()>=d){e="down"}else{e="up"}d=a(window).scrollTop()};var f=function(){var m=b.find(i.selector),q=a(window).scrollTop(),p=a(window).height(),o=p*i.reference,r=q+o-1,n;if(e=="down"){m.each(function(){var s=a(this).position().top;if((s>q)&&(s<=r)){n=a(this);return false}})}else{r=q-o+1;m.each(function(){var s=a(this).position().top;if((s<q)&&(s>=r)){n=a(this);return false}})}return n};var j=function(){var m=f();if(m){a(".success-story-item").removeClass("active");a(m).addClass("active");var n=a(".success-story-item.active").attr("data-indicate");a(".success-screens-item").removeClass("active");a(".success-stories-indicator ul li").removeClass("active");a("."+n).addClass("active");c=true;a("html, body").animate({scrollTop:(m.offset().top)},i.animationTime,function(){window.clearTimeout(h);c=false})}};var l=function(){if(c){return}var m=a(window).scrollTop();if(m<i.offsetTop){return}if(m>(a("html").height()-a(window).height()-i.offsetBottom)){return}k();window.clearTimeout(h);h=window.setTimeout(j,i.delay)};a(window).scroll(l);return this}})(jQuery);