$(function(){var b=10485760;var a=["application/zip","application/x-compressed-zip","application/x-compressed","application/x-zip-compressed","multipart/x-zip","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.ms-excel","application/pdf","text/plain","application/vnd.ms-powerpointtd","text/csv","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-powerpoint","application/octet-stream"];var e="#output2";var c="#inquire_quote_files";var f=5;var d="#progress-wrp2";$("#inquire_quote_files").on("change",function(i){i.preventDefault();var l=true;var h=[];var m=0;if(!window.File&&window.FileReader&&window.FileList&&window.Blob){$(".gritter-item-wrapper").remove();$("#file_err_msg").text("Your browser does not support new File API! Please upgrade.");$("#file_err_msg").css("display","block")}else{var n=$("#inquire_quote_files")[0].files.length;if(n>f){$(".gritter-item-wrapper").remove();$("#file_err_msg").text("You have selected "+n+" file(s), "+f+" is maximum!");$("#file_err_msg").css("display","block");l=false}$($("#inquire_quote_files")[0].files).each(function(o,p){if(p.value!==""){file_exe=p.name.split(".").pop();if(a.indexOf(p.type)===-1&&p.type!=""&&file_exe!="zip"){$(".gritter-item-wrapper").remove();$("#file_err_msg").html("<b>"+p.name+"</b> is unsupported file type!");$("#file_err_msg").css("display","block");l=false}m=m+p.size}});if(m>b){$(".gritter-item-wrapper").remove();$("#file_err_msg").html("You have uploaded "+(m/1048576).toFixed(2)+" MB file size(s), only"+(b/1048576)+" MB file size is allowed!");$("#file_err_msg").css("display","block");l=false}if(l){var j=new FormData();jQuery.each($("#inquire_quote_files")[0].files,function(p,o){j.append("quote_files["+p+"]",o);$("#files").val(o.name)});$.ajax({url:"https://www.CNS.com/contacts/upload",type:"POST",data:j,contentType:false,cache:false,processData:false,xhr:function(){var o=$.ajaxSettings.xhr();if(o.upload){$(d).show();o.upload.addEventListener("progress",function(p){var q=0;var r=p.loaded||p.position;var s=p.total;if(p.lengthComputable){q=Math.ceil(r/s*100)}$(d+" .progress-bar").css("width",+q+"%");$(d+" .status").text(q+"%");setTimeout(function(){$(d+" .progress-bar").css("0",+q+"%");$(d+" .status").text("0%");$(d).hide()},2000)},true)}return o},mimeType:"multipart/form-data"}).complete(function(o){$("#file_err_msg").hide();$("#output2").hide();$("#output2").html(o.responseText);$("#output2").show()})}}$(e).html("");var k="";$(h).each(function(o){k+=h[o]+"<br />"});if(k!=""){$(".gritter-item-wrapper").remove();$.gritter.add({title:"File error:",fade_in_speed:"medium",fade_out_speed:2000,time:6000,text:k,sticky:false,class_name:"growl-danger",})}function g(o){var q=["Bytes","KB","MB","GB","TB"];if(o==0){return"0 Bytes"}var p=parseInt(Math.floor(Math.log(o)/Math.log(1024)));return Math.round(o/Math.pow(1024,p),2)+" "+q[p]}})});